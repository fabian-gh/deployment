{namespace deployment=\TYPO3\Deployment\ViewHelpers}

<f:layout name="Backend"/>

<f:section name="content">

    <f:form.errors>
        <div class="error">
            <strong>{error.propertyName}</strong>:
            <f:for each="{error.errors}" as="errorDetail">{errorDetail.message}</f:for>
        </div>
    </f:form.errors>
    
    <style>
        .table{
            border-collapse: collapse; 
            border: 1px solid #000;
        }
        .column{
            border: 1px solid #000;
            padding: 3px;
        }
    </style>


    <f:form action="deploy" name="deploy" object="{deploy}">
        <b>Gesamtdatens√§tze: </b><f:count>{historyEntries}</f:count><br /><br />
        
        <table class="table">
            <tr style="border: 1px solid #000;">
                <th class="column">&nbsp;</th>
                <th class="column">ID-Infos</th>
                <th class="column">Timestamp</th>
                <th class="column">Table</th>
                <th class="column">Old Record</th>
                <th class="column">New Record</th>
            </tr>
            <f:for each="{historyEntries}" as="entry">
                <tr style="border: 1px solid #000;">
                    <td class="column"><f:form.checkbox property="historyEntries" value="{entry.uid}"/></td>
                    <td class="column">
                        UID: {entry.uid}<br/>
                        Log-UID: {entry.sysLogUid}<br />
                        Rec-UID: {entry.recuid}
                    </td>
                    <td class="column"><f:format.date format="d.m.Y - H:i:s">{entry.tstamp}</f:format.date></td>
                    <td class="column">{entry.tablename}</td>
                    
                    <!--<f:for each="{entry.historyData}" as="hData">
                        <td class="column">{hData.bodytext}<td>
                        <td class="column">{entry.historyData.newRecord}</td>
                    </f:for>-->
                </tr>
            </f:for>
        </table><br />

        <f:form.submit value="Deployen"/>
    </f:form>


</f:section>
