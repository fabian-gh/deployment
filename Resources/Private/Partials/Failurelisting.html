{namespace d=TYPO3\Deployment\ViewHelpers}

<f:form action="clearFailures" name="failure" object="{failure}">
    <br />
    <b>Number of entries to be checked: </b><f:count>{diff}</f:count><br /><br />
    
    <input type="button" class="allDb" value="Select all database entries" />
    <input type="button" class="allList" value="Select all list entries" />
    <br /><br />

    <table class="table2 typo3-dblist">
        <tr class="t3-row-header">
            <th class="th-spacer3">Tablename &amp; Options</th>
            <th class="th-spacer3">Differences</th>
        </tr>
        <f:for each="{failureEntries}" as="fEntry" key="fKey" iteration="itemIteration">
            <f:for each="{diff}" as="diffEntry" key="diffkey">
                <f:if condition="{fKey} == {diffkey}">
                    <f:debug>{dEntry}</f:debug>
                    <tr rowspan="2">
                        <td class="innertableheader-spacer" colspan="2"><b>Table: {fEntry.tablename}</b></td>
                    </tr>

                    <tr class="outertr-spacer">
                    <td>
                        <d:form.radio radioIndex="{itemIteration.index}" property="failureEntries" value="database.{fEntry.tablename}.{fEntry.uuid}" class="radios db-radio" />&nbsp;Use Databaseentry (<span class="diff-r">red</span>)<br />
                        <d:form.radio radioIndex="{itemIteration.index}" property="failureEntries" value="list.{fEntry.tablename}.{fEntry.uuid}" class="radios list-radio" />&nbsp;Use Listentry (<span class="diff-g">green</span>)
                    </td>
                    <td>
                        <table class="table3">
                            <tr class="t3-row-header"><th class="th-spacer3">Coloumn</th><th class="th-spacer3">Value</th></tr>
                                <f:for each="{diffEntry}" as="entry" key="key">
                                    <tr>
                                        <td><b>{key}: </td><td></b><f:format.raw>{entry}</f:format.raw></td> 
                                    </tr>
                                </f:for>
                        </table>
                    </td>
                    </tr>
                </f:if>
            </f:for>
        </f:for>
    </table>
    
    <input type="button" class="allDb" value="Select all database entries" />
    <input type="button" class="allList" value="Select all list entries" />
    <br /><br /><br />
    
    <f:form.submit value="Correct entries" />  
</f:form>

<script type="text/javascript">

jQuery('document').ready(function() {
    
    jQuery('.db-radio').attr('checked', 'checked');
    
    jQuery('.allDb').click(function() {
        jQuery('.list-radio').removeAttr('checked');
        jQuery('.db-radio').prop('checked', 'checked');
    });
    
    jQuery('.allList').click(function() {
        jQuery('.db-radio').removeAttr('checked');
        jQuery('.list-radio').prop('checked', 'checked');       
    });
});

</script>